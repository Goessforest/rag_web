FROM postgres:14

# Install dependencies for building pgvector
RUN apt-get update && apt-get install -y \
      build-essential \
      postgresql-server-dev-14 \
      git

# Clone and build pgvector
RUN git clone https://github.com/pgvector/pgvector.git /tmp/pgvector
WORKDIR /tmp/pgvector
RUN make && make install

# Clean up
WORKDIR /
RUN rm -rf /tmp/pgvector
